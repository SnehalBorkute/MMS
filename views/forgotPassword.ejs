<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Reset Password</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  />
</head>
<body class="bg-light">
  <div class="container mt-5">
    <div class="col-md-6 offset-md-3 card p-4 shadow-sm">
      <h3 class="text-center mb-4">Reset Password</h3>

      <% if (error) { %>
        <div class="alert alert-danger"><%= error %></div>
      <% } %>

      <form action="/auth/forgot-password" method="POST">
        <div class="form-group">
          <label for="email">Registered Email</label>
          <input
            type="email"
            id="email"
            name="email"
            class="form-control"
            placeholder="Enter your email"
            required
          />
        </div>

        <div class="form-group">
          <label for="password">New Password</label>
          <div class="input-group">
            <input
              type="password"
              id="password"
              name="password"
              class="form-control"
              placeholder="New password"
              required
              minlength="6"
            />
            <div class="input-group-append">
              <button
                class="btn btn-outline-secondary"
                type="button"
                onclick="togglePassword('password', this)"
              >
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm New Password</label>
          <div class="input-group">
            <input
              type="password"
              id="confirmPassword"
              name="confirmPassword"
              class="form-control"
              placeholder="Confirm password"
              required
              minlength="6"
            />
            <div class="input-group-append">
              <button
                class="btn btn-outline-secondary"
                type="button"
                onclick="togglePassword('confirmPassword', this)"
              >
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
        </div>

        <button type="submit" class="btn btn-primary w-100">Reset Password</button>
      </form>

      <div class="text-center mt-3">
        <a href="/auth/login">Back to Login</a>
      </div>
    </div>
  </div>

  <script>
    function togglePassword(fieldId, btn) {
      const field = document.getElementById(fieldId);
      const icon = btn.querySelector('i');

      if (field.type === "password") {
        field.type = "text";
        icon.classList.remove("fa-eye");
        icon.classList.add("fa-eye-slash");
      } else {
        field.type = "password";
        icon.classList.remove("fa-eye-slash");
        icon.classList.add("fa-eye");
      }
    }
  </script>
</body>
</html>
